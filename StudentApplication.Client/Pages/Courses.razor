@page "/"
@page "/courses"
@using StudentApplication.Common.Models

<PageTitle>Courses</PageTitle>

<PaginatedTable T="Course" TKey="int" Title="Courses">
    <Edit>
        <MudTd><MudTextField Placeholder="Name" @bind-Value="@context.Name" For="@(()=>context.Name)" /></MudTd>
        <MudTd colspan="2"><MudDateRangePicker DateRange="@(new DateRange(context.StartsAt, context.EndsAt))"  DateRangeChanged="d => ApplyDateRange(d, context)" MinDate="DateTime.Today"/></MudTd>
        <MudTd><MudNumericField Placeholder="Price" @bind-Value="@context.Price" For="@(()=>context.Price)" Required/></MudTd>
    </Edit>
</PaginatedTable>

@code
{ 
    private void ApplyDateRange(DateRange? range, Course context)
    {
        context.StartsAt = range?.Start ?? DateTime.Today;
        context.EndsAt = range?.End ?? DateTime.Today;
    }
}